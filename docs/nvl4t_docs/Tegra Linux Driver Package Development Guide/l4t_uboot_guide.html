<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>NVIDIA Tegra Linux Driver Package Development Guide</title><link rel="Prev" href="l4t_software_features.html" title="Previous"><link rel="Next" href="l4t_kernel_boot_time.html" title="Next"><link rel="StyleSheet" href="css/l4t_uboot_guide.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/l4t_uboot_guide_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pT42IaB7zjCWhzor4MV_002bmEg" class="ww_skin_page_body" style="background-attachment: scroll; background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt" onload="Page.OnLoad('../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html');"><header><div><table width="100%" align="center" summary=""><tr><td class="Header_Left"><img alt="NVIDIA Tegra" src="images/NVLogo_2D_H.jpg" width="204" height="44" border="0"></td><td class="Header_Right">
           Tegra Linux Driver Package<br>
           Development Guide <br><font size="-1">May 16, 2016 | 24.1 Release</font></td></tr></table></div><!--     <br clear="all">
 --><hr color="#DEE4F0"><div class="ww_skin_page_toolbar"><!-- Twitter --><!--         --><!-- FaceBook Like --><!--               --><!-- LinkedIn Share --><!--                --><!-- Google +1 --><!--           --><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwpID0E0GT0HA" class="Heading_1">U-Boot Guide</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0ET0HA">Requirements</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0RS0HA">Downloading and Building U-Boot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0PR0HA">Flashing U-Boot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0QQ0HA">Flashing Just U-Boot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0GQ0HA">Changing the eMMC Partition Layout</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0YH0HA">Testing Root Filesystem By Device</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0VH0HA">Building the Device Tree Compiler</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0BH0HA">Adding a Compiled Kernel to the Root File System</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E06F0HA">Example Sysboot Configuration Files</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0ZE0HA">Optimizing U-Boot Boot Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0QC0HA">Debugging U-Boot Environment</a></div></dd></dl></div><div id="wwpID0E0FT0HA" class="Body_Text">U-Boot is the default boot loader for NVIDIA<span style="font-size: smaller; vertical-align: super">®</span>&nbsp;Tegra<span style="font-size: smaller; vertical-align: super">®</span>&nbsp;Linux&nbsp;Driver&nbsp;Package (L4T). If you used an earlier release of L4T, check that your environment is fully updated for the new boot loader before compiling and flashing the boot loader and the kernel.</div><div id="wwpID0E0ET0HA" class="Heading_2">Requirements</div><div id="wwpID0E0DT0HA" class="Body_Text">The software requirements and prerequisites required for Tegra&nbsp;Linux Driver Package (L4T) include:</div><div id="wwpID0E0CT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Linux-based Host System</div><div id="wwpID0E0BT0HA" class="List_Continue">Functionality of the U-Boot build and flashing utilities was validated using an Ubuntu 12.04 host system. Later versions of Ubuntu or alternative Linux distributions may work with host-specific modifications.</div><div id="wwpID0E0AT0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Tegra&nbsp;Linux Driver Package (L4T)</div><div id="wwpID0E06S0HA" class="List_Continue">Download the latest L4T package from the Tegra Developer Zone and follow the installation instructions in the user documentation. You can find L4T on the Tegra Developer Zone:</div><div id="wwpID0E05S0HA" class="Code"><span class="Weblink"><a href="http://developer.nvidia.com/linux-tegra" target="external_window">http://developer.nvidia.com/linux-tegra </a></span></div><div id="wwpID0E04S0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Device Tree Compiler (dtc)</div><div id="wwpID0E03S0HA" class="List_Continue">The Device Tree Compiler (dtc) is used to compile device tree files contained in the U-Boot source tree. Many of the dtc packages available from standard Linux distribution package management systems (like apt) are not yet updated with a version of dtc supporting the features required by the U‑Boot makefile. Therefore, an example of building dtc from source is included in this chapter. For the procedure, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0VH0HA" title="U-Boot Guide">Building Device Tree Compiler</a></span>.</div><div id="wwpID0E02S0HA" class="List_Continue">A pre-built dtc binary is also included in the kernel directory of the release. This binary is built from the kernel sources in this release. The sources are located in the <span class="Code_Char">scripts/dtc</span> directory. You build dtc by building the kernel <span class="Code_Char">dtbs</span> target.</div><div id="wwpID0E01S0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Download the Linaro Aarch64 tool chain</div><div id="wwpID0E0ZS0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>U‑Boot source.</div><div id="wwpID0E0YS0HA" class="List_Continue">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0RS0HA" title="U-Boot Guide">Downloading and Building U-Boot</a></span> in this chapter.</div><div id="wwpID0E0XS0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Kernel source</div><div id="wwpID0E0WS0HA" class="List_Continue">For information, see the following sections in the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Getting Started</a></span> chapter:</div><div id="wwpID0E0VS0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Setting up the Root File System</a></span></div><div id="wwpID0E0US0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#wwpID0E0VE0HA" title="Getting Started">Synchronizing the Kernel Sources</a></span></div><div id="wwpID0E0TS0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#wwpID0E0DE0HA" title="Getting Started">Building the NVIDIA Kernel</a></span></div><div id="wwpID0E0SS0HA" class="List_Continue">Also, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0PR0HA" title="U-Boot Guide">Adding a Compiled Kernel to the Root File System</a></span> in this chapter.</div><div id="wwpID0E0RS0HA" class="Heading_2">Downloading and Building U-Boot</div><div id="wwpID0E0QS0HA" class="Body_Text">Before flashing U-Boot to your reference platform, you must download and build it on your Linux host system. NVIDIA offers a Git repository containing the source code for a U‑Boot build suitable for L4T.</div><div id="wwpID0E0PS0HA" class="Heading_5">Prerequisite</div><div id="wwpID0E0OS0HA" class="Body_Text">Before copying U-Boot, back up all of the original U-Boot files in:</div><div id="wwpID0E0NS0HA" class="Code">&lt;top&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/&lt;board&gt;/</div><div id="wwpID0E0MS0HA" class="Body_Text">Where:</div><div id="wwpID0E0LS0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;</span><span class="Hyperlink" style="font-family: &quot;Courier New&quot;"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/Glossary/platform_or_ver.html#" title="&lt;platform|ver&gt;: t210ref [More…]">platform|ver</a></span><span class="Code_Char">&gt;</span> is the Tegra hardware platform, such as <span class="Code_Char">t210ref</span>.</div><div id="wwpID0E0KS0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>&lt;board&gt; is <span class="Body_Text_Char">the individual board, such as</span> <span class="Code_Char">p2371-2180</span>.</div><div id="wwpID0E0JS0HA" class="Heading_5">To download and build U-Boot</div><div id="wwpID0E0IS0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Download the L4T U-Boot source code by executing the following commands:</div><div id="wwpID0E0HS0HA" class="Code">$ git clone -n git://nv-tegra.nvidia.com/3rdparty/u-boot.git</div><div id="wwpID0E0GS0HA" class="List_Continue">Alternatively, you can use the <span class="Code_Char">source_sync.sh</span> script in the L4T release. </div><div id="wwpID0E0FS0HA" class="List_Continue">If you run <span class="Code_Char">source_sync.sh -u</span> without parameters, the script prompts for the <span class="Code_Char">&lt;TAG_NAME&gt;</span>, which is provided in the <span class="Emphasis">Release Notes</span>.</div><div id="wwpID0E0ES0HA" class="List_Continue">The "-k" option to <span class="Code_Char">source_sync</span> syncs the kernel sources. A space between the <span class="Code_Char">-u</span> and <span class="Code_Char">-k</span> options is allowed. By default, if no option is provided, the script syncs the kernel and u-boot sources.</div><div id="wwpID0E0DS0HA" class="List_Continue">Also, you can run the script by passing the <span class="Code_Char">&lt;TAG_NAME&gt;</span> as follows:</div><div id="wwpID0E0CS0HA" class="Code">$ cd &lt;your_L4T_root&gt;/Linux_for_Tegra</div><div id="wwpID0E0BS0HA" class="Code">$ ./source_sync.sh -u &lt;TAG_NAME&gt;</div><div id="wwpID0E0AS0HA" class="List_Continue">This syncs the source to:</div><div id="wwpID0E06R0HA" class="Code">&lt;source_sync.sh_location&gt;/sources/u-boot_source </div><div id="wwpID0E05R0HA" class="List_Continue">The <span class="Code_Char">&lt;uboot_src_dir&gt;</span> directory becomes:</div><div id="wwpID0E04R0HA" class="Code">&lt;your_L4T_root&gt;/Linux_for_Tegra/sources/u-boot_source</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt; width: 391.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA03R0HA" class="Normal" style="margin-top: 8pt"><span style="color: #FFFFFF; font-family: &quot;Trebuchet MS&quot;; font-weight: bold">Note:</span></div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA03R0HA" class="Normal" style="margin-bottom: 6pt; margin-top: 6pt"><span style="font-family: &quot;Trebuchet MS&quot;; font-size: 10pt; font-weight: bold">Further instructions assume your current working directory is the U-Boot source tree.</span></div></td></tr></table></div><div id="wwpID0E02R0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Check out the Git tag name:</div><div id="wwpID0E01R0HA" class="Code">$ git checkout -b &lt;branch_name&gt; &lt;tag_name&gt;</div><div id="wwpID0E0ZR0HA" class="List_Continue">Where:</div><div id="wwpID0E0YR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;branch_name&gt;</span> is the name of your local branch.</div><div id="wwpID0E0XR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;tag_name&gt;</span> is the release tag name provided in the <span class="Emphasis">Release Notes</span>.</div><div id="wwpID0E0WR0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Set the build environment:</div><div id="wwpID0E0VR0HA" class="Code">$ export ARCH=arm</div><div id="wwpID0E0UR0HA" class="Code">$ export CROSS_COMPILE=&lt;your_toolchain_location&gt;</div><div id="wwpID0E0TR0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Build U-Boot by executing:</div><div id="wwpID0E0SR0HA" class="Code">$ make distclean</div><div id="wwpID0E0RR0HA" class="Code">$ make &lt;target_board&gt;_defconfig</div><div id="wwpID0E0QR0HA" class="Code">$ make</div><div id="wwpID0E0PR0HA" class="Heading_2">Flashing U-Boot</div><div id="wwpID0E0OR0HA" class="Body_Text">You must flash U-Boot to internal eMMC only. At boot time, U-Boot fetches the boot configuration file, kernel and device tree, all of which may reside on one of the following storage devices used for boot:</div><div id="wwpID0E0NR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Internal eMMC</div><div id="wwpID0E0MR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>An SD card</div><div id="wwpID0E0LR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>A USB storage device</div><div id="wwpID0E0KR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>A TFTP/NFS server</div><div id="wwpID0E0JR0HA" class="Body_Text">When executing the script that flashes U-Boot, you must specify a command-line option to specify the storage device containing the root filesystem, so that the appropriate boot configuration file is selected. The boot configuration file contains kernel command line parameters that control where the Linux kernel looks for the root filesystem. The following sections describe the script command for each configuration.</div><div id="wwpID0E0IR0HA" class="Heading_5">To flash U-Boot and mount the root filesystem from internal eMMC</div><div id="wwpID0E0HR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to select a boot configuration file that causes the kernel to mount the root filesystem from internal eMMC:</div><div id="wwpID0E0GR0HA" class="Code">$ sudo ./flash.sh &lt;target_board&gt; mmcblk0p1</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt; width: 391.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0FR0HA" class="Normal" style="margin-top: 8pt"><span style="color: #FFFFFF; font-family: &quot;Trebuchet MS&quot;; font-weight: bold">Note:</span></div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA0FR0HA" class="Normal" style="margin-bottom: 6pt; margin-top: 6pt"><span style="font-family: &quot;Trebuchet MS&quot;; font-size: 10pt; font-weight: bold">Check that your environment is fully updated for this change in boot loader before compiling and flashing the boot loader and the kernel.</span></div></td></tr></table></div><div id="wwpID0E0ER0HA" class="Heading_5">To flash U-Boot and mount the root filesystem from an SD card</div><div id="wwpID0E0DR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to select a boot configuration file that causes the kernel to mount the root filesystem from an SD card:</div><div id="wwpID0E0CR0HA" class="Code">$ sudo ./flash.sh &lt;target_board&gt; mmcblk1p1</div><div id="wwpID0E0BR0HA" class="Heading_5">To flash U-Boot and mount the root filesystem from a USB storage device</div><div id="wwpID0E0AR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to select a boot configuration file that causes the kernel to mount the root filesystem from a USB storage device, such as a Pen Drive.</div><div id="wwpID0E06Q0HA" class="Code">$ sudo ./flash.sh &lt;target_board&gt; sda1</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 36pt; width: 391.5pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA05Q0HA" class="Normal" style="margin-top: 8pt"><span style="color: #FFFFFF; font-family: &quot;Trebuchet MS&quot;; font-weight: bold">Note:</span></div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA05Q0HA" class="Normal" style="margin-bottom: 6pt; margin-top: 6pt"><span style="font-family: &quot;Trebuchet MS&quot;; font-size: 10pt; font-weight: bold">The U-Boot boot loader detects USB external storage. The kernel detects both USB external storage and external SATA storage.</span></div></td></tr></table></div><div id="wwpID0E04Q0HA" class="List_Continue">Use one USB or SATA external storage device at a time. If using more than one external device, a random device may be chosen as the root device.</div><div id="wwpID0E03Q0HA" class="Heading_5">To flash U-Boot and mount the root filesystem from an IP network</div><div id="wwpID0E02Q0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to select a boot configuration file that causes the kernel to mount the root filesystem from a TFTP/NFS server:</div><div id="wwpID0E01Q0HA" class="Code">$ sudo ./flash.sh -N &lt;IPA&gt;:/&lt;<span class="Code_Char">nfs directory</span>&gt; [-n &lt;target IPA&gt;:&lt;host IPA&gt;:&lt;gateway IPA&gt;:&lt;netmask&gt;] &lt;<span class="Code_Char">target_board</span>&gt; &lt;interface name&gt;</div><div id="wwpID0E0ZQ0HA" class="List_Continue">Where: </div><div id="wwpID0E0YQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;interface name&gt;</span> is eth0 for RJ45 connector and eth1 for a USB Ethernet dongle.</div><div id="wwpID0E0XQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;IPA&gt;</span> is the NFS server hosting the root filesystem.</div><div id="wwpID0E0WQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;nfs_directory&gt;</span> is the full path name of exported root filesystem.</div><div id="wwpID0E0VQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;target IPA&gt;</span> is the static IP address for the target device.</div><div id="wwpID0E0UQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;host IPA&gt;</span> is the static IP address for the NFS server.</div><div id="wwpID0E0TQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;gateway IPA&gt;</span> is the static IP address for the gateway.</div><div id="wwpID0E0SQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;netmask&gt;</span> is the static netmask for the local network.</div><div id="wwpID0E0RQ0HA" class="List_Continue"><span class="Strong">Note:</span> The <span class="Code_Char">-n</span> option is recommended on point-to-point network connections where no DHCP server is configured. </div><div id="wwpID0E0QQ0HA" class="Heading_2">Flashing Just U-Boot</div><div id="wwpID0E0PQ0HA" class="Body_Text">To flash the full L4T image to the reference platform see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0PR0HA" title="U-Boot Guide">Flashing U-Boot</a></span> in this chapter. </div><div id="wwpID0E0OQ0HA" class="Body_Text">To flash U‑Boot, proceed as follows.</div><div id="wwpID0E0NQ0HA" class="Heading_5">To copy U-Boot for flashing to the reference platform</div><div id="wwpID0E0MQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following on your Linux host system:</div><div id="wwpID0E0LQ0HA" class="Code">$ cp &lt;uboot_src_dir&gt;/u-boot{,.bin,.dtb,-dtb.bin} \</div><div id="wwpID0E0KQ0HA" class="Code">&lt;your_L4T_root&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/&lt;board&gt;</div><div id="wwpID0E0JQ0HA" class="Heading_5">To flash just new U-Boot</div><div id="wwpID0E0IQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following:</div><div id="wwpID0E0HQ0HA" class="Code">$ sudo ./flash.sh -k EBT &lt;target_board&gt; mmcblk0p1</div><div id="wwpID0E0GQ0HA" class="Heading_2">Changing the eMMC Partition Layout</div><div id="wwpID0E0FQ0HA" class="Body_Text">The following information is based on eMMC hardware and software layout information in the following files:</div><div id="wwpID0E0EQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;target_board&gt;.conf</span> </div><div id="wwpID0E0DQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;top&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/cfg/gnu_linux_tegraboot_emmc_full.xml</span></div><div id="wwpID0E0CQ0HA" class="List_Continue">Where <span class="Code_Char">&lt;top&gt;</span> is the L4T root directory.</div><div id="wwpID0E0BQ0HA" class="List_Continue"><span class="Strong">Note</span>: L4T U-Boot does not use the kernel partition. The kernel is installed into the filesystem alongside the boot configuration file. Aside from this difference, U-Boot has the same internal eMMC partition layout as that used by cboot.</div><div id="wwpID0E0AQ0HA" class="Heading_5">eMMC IC Parameter</div><div id="wwpID0E06P0HA" class="Body_Text">The eMMC IC parameter is defined by 2 variables in the <span class="Code_Char">&lt;target_board&gt;.conf</span> file. They limit the size of the total usable data area and determine the location of GPT partitions.</div><div id="wwpID0E05P0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>BOOTPARTSIZE: specifies the eMMC boot partition size (boot0 partition size + boot1 partition size)</div><div id="wwpID0E04P0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>EMMCSIZE: specifies the eMMC usable data size (BOOTPARTSIZE + user partition size)</div><div id="wwpID0E03P0HA" class="List_Continue"><span class="Strong">Note:</span> boot0, boot1, and user partition size can be obtained from the eMMC device datasheet.</div><div id="wwpID0E02P0HA" class="Heading_5">Root Filesystem Size</div><div id="wwpID0E01P0HA" class="Body_Text">The root filesystem partition is the largest of the partitions, and its size is one of the key factors in partition layout determination. By default, <span class="Code_Char">flash.sh</span> sets the root filesystem size to 14 GB. </div><div id="wwpID0E0ZP0HA" class="Heading_5">To modify the root filesystem partition size</div><div id="wwpID0E0YP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Modify the value of the <span class="Code_Char">ROOTFSSIZE</span> variable in the <span class="Code_Char">&lt;target_board&gt;.conf</span> file.</div><div id="wwpID0E0XP0HA" class="Body_Text"><span class="Strong">Note:</span> The total space used by all partitions cannot exceed <span class="Code_Char">EMMCSIZE</span>.</div><div id="wwpID0E0WP0HA" class="Heading_5">GPT Partitions</div><div id="wwpID0E0VP0HA" class="Body_Text">The <span class="Code_Char">flash.sh</span> script creates the primary and secondary GPT partitions automatically, based on the internal eMMC partition layout. </div><div id="wwpID0E0UP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>The Protective MBR contains device information to prevent traditional boot loaders from performing destructive actions. It is located at LBA 0.</div><div id="wwpID0E0TP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>The primary GPT partition contains the GUID Partition Table. It is located at LBA 1.</div><div id="wwpID0E0SP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>The secondary GPT partition contains the same information as the primary GPT and serves as the backup. It is located at the last LBA of the boot device.</div><div id="wwpID0E0RP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>The last Logical Block Address (LBA) varies from device to device. Both U-Boot and the kernel are able to obtain the last LBA.</div><div id="wwpID0E0QP0HA" class="Heading_5">LNX Partition</div><div id="wwpID0E0PP0HA" class="Body_Text">The LNX partition is not used by U-Boot; however, for compatibility, an empty LNX partition is allocated.</div><div id="wwpID0E0OP0HA" class="Heading_5">APP Partition</div><div id="wwpID0E0NP0HA" class="Body_Text">If root filesystem storage is in eMMC, the root filesystem is flashed to this partition. U-Boot expects the boot configuration file, kernel, and device tree files to exist in the <span class="Code_Char">&lt;rootfs&gt;/boot</span> directory; consequently, <span class="Code_Char">flash.sh</span> flashes the following kernel files in the APP partition:</div><div id="wwpID0E0MP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>kernel (<span class="Code_Char">Image)</span></div><div id="wwpID0E0LP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>device_tree_blob (<span class="Code_Char">tegra210-jetson-cv-base-p2597-2180-a00.dtb</span>)</div><div id="wwpID0E0KP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Body_Text_Char">boot configuration file</span> (<span class="Code_Char">extlinux/extlinux.conf</span>)</div><div id="wwpID0E0JP0HA" class="List_Continue"><span class="Strong">Note: </span>The<span class="Strong"> </span><span class="Code_Char">flash.sh</span> script treats the root filesystem-on-IP-network configuration as a special case and also flashes these kernel files in the <span class="Code_Char">&lt;APP partition&gt;:/boot</span> directory.</div><div id="wwpID0E0IP0HA" class="Heading_5">Example Full Internal eMMC Partition Layout</div><div id="wwpID0E0HP0HA" class="Body_Text">An eMMC layout configuration file has the following contents. The actual configuration file is named <span class="Code_Char">gnu_linux_tegraboot_emmc_full.xml</span>.</div><div id="wwpID0E0GP0HA" class="List_Continue"><span class="Strong">Note:</span> Under default settings, U-Boot does not use the kernel partition (LNX).</div><div id="wwpID0E0FP0HA" class="Code">&lt;?xml version="1.0"?&gt;</div><div id="wwpID0E0EP0HA" class="Code">&nbsp;</div><div id="wwpID0E0DP0HA" class="Code">&lt;!-- Nvidia Tegra Partition Layout Version 1.0.0 --&gt;</div><div id="wwpID0E0CP0HA" class="Code">&nbsp;</div><div id="wwpID0E0BP0HA" class="Code">&lt;partition_layout version="01.00.0000"&gt;</div><div id="wwpID0E0AP0HA" class="Code">    &lt;device type="sdmmc" instance="3"&gt;</div><div id="wwpID0E06O0HA" class="Code">        &lt;partition name="BCT" id="2" type="boot_config_table"&gt;</div><div id="wwpID0E05O0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E04O0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E03O0HA" class="Code">            &lt;size&gt; 4194304 &lt;/size&gt;</div><div id="wwpID0E02O0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E01O0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0ZO0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0YO0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0XO0HA" class="Code">&nbsp;</div><div id="wwpID0E0WO0HA" class="Code">        &lt;partition name="NXC" id="3" type="NVCTYPE"&gt;</div><div id="wwpID0E0VO0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0UO0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0TO0HA" class="Code">            &lt;size&gt; 4194304 &lt;/size&gt;</div><div id="wwpID0E0SO0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0RO0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0QO0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0PO0HA" class="Code">            &lt;filename&gt; NVCFILE &lt;/filename&gt;</div><div id="wwpID0E0OO0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0NO0HA" class="Code">&nbsp;</div><div id="wwpID0E0MO0HA" class="Code">        &lt;partition name="PPT" id="4" type="data"&gt;</div><div id="wwpID0E0LO0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0KO0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0JO0HA" class="Code">            &lt;size&gt; PPTSIZE &lt;/size&gt;</div><div id="wwpID0E0IO0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0HO0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0GO0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0FO0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0EO0HA" class="Code">&nbsp;</div><div id="wwpID0E0DO0HA" class="Code">        &lt;partition name="GP1" id="5" type="GP1"&gt;</div><div id="wwpID0E0CO0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0BO0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0AO0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E06N0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E05N0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E04N0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E03N0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E02N0HA" class="Code">&nbsp;</div><div id="wwpID0E01N0HA" class="Code">        &lt;partition name="APP" id="6" type="data"&gt;</div><div id="wwpID0E0ZN0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0YN0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0XN0HA" class="Code">            &lt;size&gt; APPSIZE &lt;/size&gt;</div><div id="wwpID0E0WN0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0VN0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0UN0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0TN0HA" class="Code">            &lt;filename&gt; APPFILE &lt;/filename&gt;</div><div id="wwpID0E0SN0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0RN0HA" class="Code">&nbsp;</div><div id="wwpID0E0QN0HA" class="Code">        &lt;partition name="TXC" id="7" type="TBCTYPE"&gt;</div><div id="wwpID0E0PN0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0ON0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0NN0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0MN0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0LN0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0KN0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0JN0HA" class="Code">            &lt;filename&gt; TBCFILE &lt;/filename&gt;</div><div id="wwpID0E0IN0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0HN0HA" class="Code">&nbsp;</div><div id="wwpID0E0GN0HA" class="Code">        &lt;partition name="EBT" id="8" type="bootloader"&gt;</div><div id="wwpID0E0FN0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0EN0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0DN0HA" class="Code">            &lt;size&gt; 4194304 &lt;/size&gt;</div><div id="wwpID0E0CN0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0BN0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0AN0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E06M0HA" class="Code">            &lt;filename&gt; EBTFILE &lt;/filename&gt;</div><div id="wwpID0E05M0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E04M0HA" class="Code">&nbsp;</div><div id="wwpID0E03M0HA" class="Code">        &lt;partition name="BXF" id="9" type="data"&gt;</div><div id="wwpID0E02M0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E01M0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0ZM0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0YM0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0XM0HA" class="Code">            &lt;partition_attribute&gt; 0 &lt;/partition_attribute&gt;</div><div id="wwpID0E0WM0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0VM0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0UM0HA" class="Code">            &lt;filename&gt; BPFFILE &lt;/filename&gt;</div><div id="wwpID0E0TM0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0SM0HA" class="Code">&nbsp;</div><div id="wwpID0E0RM0HA" class="Code">        &lt;partition name="WX0" id="10" type="WB0TYPE"&gt;</div><div id="wwpID0E0QM0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0PM0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0OM0HA" class="Code">            &lt;size&gt; 6291456 &lt;/size&gt;</div><div id="wwpID0E0NM0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0MM0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0LM0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0KM0HA" class="Code">            &lt;filename&gt; WB0FILE &lt;/filename&gt;</div><div id="wwpID0E0JM0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0IM0HA" class="Code">&nbsp;</div><div id="wwpID0E0HM0HA" class="Code">        &lt;partition name="RP1" id="11" type="data"&gt;</div><div id="wwpID0E0GM0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0FM0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0EM0HA" class="Code">            &lt;size&gt; 4194304 &lt;/size&gt;</div><div id="wwpID0E0DM0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0CM0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0BM0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0AM0HA" class="Code">            &lt;filename&gt; DTBFILE &lt;/filename&gt;</div><div id="wwpID0E06L0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E05L0HA" class="Code">&nbsp;</div><div id="wwpID0E04L0HA" class="Code">&nbsp;</div><div id="wwpID0E03L0HA" class="Code">        &lt;partition name="TXS" id="12" type="data"&gt;</div><div id="wwpID0E02L0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E01L0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0ZL0HA" class="Code">            &lt;size&gt; 6291456 &lt;/size&gt;</div><div id="wwpID0E0YL0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0XL0HA" class="Code">            &lt;partition_attribute&gt; 0 &lt;/partition_attribute&gt;</div><div id="wwpID0E0WL0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0VL0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0UL0HA" class="Code">            &lt;filename&gt; TOSFILE &lt;/filename&gt;</div><div id="wwpID0E0TL0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0SL0HA" class="Code">&nbsp;</div><div id="wwpID0E0RL0HA" class="Code">        &lt;partition name="EXS" id="13" type="data"&gt;</div><div id="wwpID0E0QL0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0PL0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0OL0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0NL0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0ML0HA" class="Code">            &lt;partition_attribute&gt; 0 &lt;/partition_attribute&gt;</div><div id="wwpID0E0LL0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0KL0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0JL0HA" class="Code">            &lt;filename&gt; EKSFILE &lt;/filename&gt;</div><div id="wwpID0E0IL0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0HL0HA" class="Code">&nbsp;</div><div id="wwpID0E0GL0HA" class="Code">        &lt;partition name="FX" id="14" type="FBTYPE"&gt;</div><div id="wwpID0E0FL0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0EL0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0DL0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0CL0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0BL0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0AL0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E06K0HA" class="Code">            &lt;filename&gt; FBFILE &lt;/filename&gt;</div><div id="wwpID0E05K0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E04K0HA" class="Code">&nbsp;</div><div id="wwpID0E03K0HA" class="Code">        &lt;partition name="SOS" id="15" type="data"&gt;</div><div id="wwpID0E02K0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E01K0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0ZK0HA" class="Code">            &lt;size&gt; 20971520 &lt;/size&gt;</div><div id="wwpID0E0YK0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0XK0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0WK0HA" class="Code">            &lt;filename&gt; SOSFILE &lt;/filename&gt;</div><div id="wwpID0E0VK0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0UK0HA" class="Code">&nbsp;</div><div id="wwpID0E0TK0HA" class="Code">        &lt;partition name="EXI" id="16" type="data"&gt;</div><div id="wwpID0E0SK0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0RK0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0QK0HA" class="Code">            &lt;size&gt; EFISIZE &lt;/size&gt;</div><div id="wwpID0E0PK0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0OK0HA" class="Code">            &lt;partition_attribute&gt; 0 &lt;/partition_attribute&gt;</div><div id="wwpID0E0NK0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0MK0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0LK0HA" class="Code">            &lt;filename&gt; EFIFILE &lt;/filename&gt;</div><div id="wwpID0E0KK0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0JK0HA" class="Code">&nbsp;</div><div id="wwpID0E0IK0HA" class="Code">        &lt;partition name="LNX" id="17" type="data"&gt;</div><div id="wwpID0E0HK0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0GK0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0FK0HA" class="Code">            &lt;size&gt; 67108864 &lt;/size&gt;</div><div id="wwpID0E0EK0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0DK0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0CK0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0BK0HA" class="Code">            &lt;filename&gt; LNXFILE &lt;/filename&gt;</div><div id="wwpID0E0AK0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E06J0HA" class="Code">&nbsp;</div><div id="wwpID0E05J0HA" class="Code">        &lt;partition name="DXB" id="18" type="data"&gt;</div><div id="wwpID0E04J0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E03J0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E02J0HA" class="Code">            &lt;size&gt; 4194304 &lt;/size&gt;</div><div id="wwpID0E01J0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0ZJ0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0YJ0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0XJ0HA" class="Code">            &lt;filename&gt; DTBFILE &lt;/filename&gt;</div><div id="wwpID0E0WJ0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0VJ0HA" class="Code">&nbsp;</div><div id="wwpID0E0UJ0HA" class="Code">        &lt;partition name="NXT" id="19" type="NCTTYPE"&gt;</div><div id="wwpID0E0TJ0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0SJ0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0RJ0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0QJ0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0PJ0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0OJ0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0NJ0HA" class="Code">            &lt;filename&gt; NCTFILE &lt;/filename&gt;</div><div id="wwpID0E0MJ0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0LJ0HA" class="Code">&nbsp;</div><div id="wwpID0E0KJ0HA" class="Code">        &lt;partition name="MXB" id="20" type="MPBTYPE"&gt;</div><div id="wwpID0E0JJ0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0IJ0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0HJ0HA" class="Code">            &lt;size&gt; 6291456 &lt;/size&gt;</div><div id="wwpID0E0GJ0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0FJ0HA" class="Code">            &lt;partition_attribute&gt; 0 &lt;/partition_attribute&gt;</div><div id="wwpID0E0EJ0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0DJ0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0CJ0HA" class="Code">            &lt;filename&gt; MPBFILE &lt;/filename&gt;</div><div id="wwpID0E0BJ0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0AJ0HA" class="Code">&nbsp;</div><div id="wwpID0E06I0HA" class="Code">        &lt;partition name="MXP" id="21" type="MBPTYPE"&gt;</div><div id="wwpID0E05I0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E04I0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E03I0HA" class="Code">            &lt;size&gt; 6291456 &lt;/size&gt;</div><div id="wwpID0E02I0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E01I0HA" class="Code">            &lt;partition_attribute&gt; 0 &lt;/partition_attribute&gt;</div><div id="wwpID0E0ZI0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0YI0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0XI0HA" class="Code">            &lt;filename&gt; MBPFILE &lt;/filename&gt;</div><div id="wwpID0E0WI0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0VI0HA" class="Code">&nbsp;</div><div id="wwpID0E0UI0HA" class="Code">        &lt;partition name="USP" id="22" type="data"&gt;</div><div id="wwpID0E0TI0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0SI0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0RI0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0QI0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0PI0HA" class="Code">            &lt;allocation_attribute&gt; 0x8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0OI0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0NI0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0MI0HA" class="Code">&nbsp;</div><div id="wwpID0E0LI0HA" class="Code">        &lt;partition name="UDA" id="23" type="data"&gt;</div><div id="wwpID0E0KI0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0JI0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E0II0HA" class="Code">            &lt;size&gt; 2097152 &lt;/size&gt;</div><div id="wwpID0E0HI0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E0GI0HA" class="Code">            &lt;allocation_attribute&gt; 0x808 &lt;/allocation_attribute&gt;</div><div id="wwpID0E0FI0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E0EI0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E0DI0HA" class="Code">&nbsp;</div><div id="wwpID0E0CI0HA" class="Code">        &lt;partition name="GPT" id="24" type="GPT"&gt;</div><div id="wwpID0E0BI0HA" class="Code">            &lt;allocation_policy&gt; sequential &lt;/allocation_policy&gt;</div><div id="wwpID0E0AI0HA" class="Code">            &lt;filesystem_type&gt; basic &lt;/filesystem_type&gt;</div><div id="wwpID0E06H0HA" class="Code">            &lt;size&gt; 0xFFFFFFFFFFFFFFFF &lt;/size&gt;</div><div id="wwpID0E05H0HA" class="Code">            &lt;file_system_attribute&gt; 0 &lt;/file_system_attribute&gt;</div><div id="wwpID0E04H0HA" class="Code">            &lt;allocation_attribute&gt; 8 &lt;/allocation_attribute&gt;</div><div id="wwpID0E03H0HA" class="Code">            &lt;percent_reserved&gt; 0 &lt;/percent_reserved&gt;</div><div id="wwpID0E02H0HA" class="Code">        &lt;/partition&gt;</div><div id="wwpID0E01H0HA" class="Code">    &lt;/device&gt;</div><div id="wwpID0E0ZH0HA" class="Code">&lt;/partition_layout&gt;</div><div id="wwpID0E0YH0HA" class="Heading_2">Testing Root Filesystem By Device</div><div id="wwpID0E0XH0HA" class="Body_Text">You should test the root file system location by device. A Y in the output indicates that correct U-Boot initialization and hand-off to the kernel occurred. </div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt; width: 401.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 184.15pt"><div id="wwpID0EABF0WH0HA" class="Cell_Heading">Root filesystem Location</div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 217.6pt"><div id="wwpID0EAAF0WH0HA" class="Cell_Heading">Jetson TX1</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0WH0HA" class="Cell_Text">mmcblk0p1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0WH0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0WH0HA" class="Cell_Text">mmcblk1p1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0WH0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0WH0HA" class="Cell_Text">sda1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0WH0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0WH0HA" class="Cell_Text">eth0</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0WH0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0WH0HA" class="Cell_Text">eth1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0WH0HA" class="Cell_Text">Y</div></td></tr></table></div><div id="wwpID0E0VH0HA" class="Heading_2">Building the Device Tree Compiler</div><div id="wwpID0E0UH0HA" class="Body_Text">Build the Device Tree Compiler (dtc) from source code included in L4T, specifying the features required by the U-Boot makefile.</div><div id="wwpID0E0TH0HA" class="Number_Continue"><span class="Strong">Note</span>: In the procedure below, if you do not want to pass in dtc as a parameter to the U‑Boot environment, ensure a local command path (such as<span class="Code_Char"> /usr/local/bin</span> or another choice) is at the beginning of the shell command path. Furthermore, if you execute (in the last step):</div><div id="wwpID0E0SH0HA" class="Number_Continue"><span class="Code_Char">$ make install</span></div><div id="wwpID0E0RH0HA" class="Number_Continue">the dtc makefile installs the binary into the first entry of shell PATH variable. Therefore, it is important that the local command path is at the beginning of the shell PATH variable.</div><div id="wwpID0E0QH0HA" class="Heading_5">To build DTC from source</div><div id="wwpID0E0NH0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Download dtc source code by executing the following <span class="Code_Char">git clone</span> command:</div><div id="wwpID0E0MH0HA" class="Code">$ git clone git://git.kernel.org/pub/scm/utils/dtc/dtc.git</div><div id="wwpID0E0LH0HA" class="Code">$ cd dtc</div><div id="wwpID0E0KH0HA" class="List_Continue">Further instructions will assume your current working directory is the dtc source tree.</div><div id="wwpID0E0JH0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Build dtc by executing:</div><div id="wwpID0E0IH0HA" class="Code">$ make</div><div id="wwpID0E0HH0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Install dtc.</div><div id="wwpID0E0GH0HA" class="List_Number" style="margin-left: 54pt">To install into the default directory (<span class="Code_Char">$HOME</span>), execute:</div><div id="wwpID0E0FH0HA" class="Code">$ make install</div><div id="wwpID0E0EH0HA" class="Body_Text" style="text-indent: 18pt">To install to a specific directory, execute:</div><div id="wwpID0E0DH0HA" class="Code">$ make install PREFIX=/usr/local</div><div id="wwpID0E0CH0HA" class="Body_Text" style="margin-left: 54pt">In either case, <span class="Code_Char">bin</span>, <span class="Code_Char">lib</span>, and <span class="Code_Char">include</span> sub-directories will be created below the installation directory.</div><div id="wwpID0E0BH0HA" class="Heading_2">Adding a Compiled Kernel to the Root File System</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0RG0HA">Adding a new Kernel</a></div></dd></dl></div><div id="wwpID0E0AH0HA" class="Body_Text">U-Boot requires a kernel image on the root filesystem. First you must configure the file system for U-Boot. Then you add the kernel image to the root filesystem.</div><div id="wwpID0E06G0HA" class="Heading_5">Prerequisite</div><div id="wwpID0E05G0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>You have compiled the kernel as described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Getting Started</a></span> in this guide.</div><div id="wwpID0E04G0HA" class="Heading_5">To configure a file system for U-Boot</div><div id="wwpID0E03G0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Use the <span class="Code_Char">apply_binaries</span> script to copy <span class="Body_Text_Char">the Image file</span> in the kernel directory into the root filesystem directory in the <span class="Code_Char">/boot</span> folder. </div><div id="wwpID0E02G0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Install the root filesystem directory onto your device. </div><div id="wwpID0E01G0HA" class="List_Continue">For U-Boot to function properly, there must be Image and <span class="Code_Char">dtb</span> files in the <span class="Code_Char">/boot</span> directory of the target file system.</div><div id="wwpID0E0ZG0HA" class="List_Continue">For more information on installing the root filesystem directory onto your device, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#wwpID0E0TJ0HA" title="Getting Started">Setting Up the Root File System</a></span> in the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Getting Started</a></span> chapter. </div><div id="wwpID0E0YG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>If you have already installed your root filesystem onto a device, manually copy the Image file and <span class="Code_Char">dtb</span> files to the installed root file system.</div><div id="wwpID0E0XG0HA" class="Heading_5">To configure a file system installed in the internal eMMC</div><div id="wwpID0E0WG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Optionally, backup the existing release kernel and dtb files to avoid overwriting.</div><div id="wwpID0E0VG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the compiled Image and <span class="Code_Char">dtb</span> files over the current L4T release kernel directory by executing the following commands:</div><div id="wwpID0E0UG0HA" class="Code">$ cp arch/arm/boot/Image &lt;L4T_path&gt;/Linux_for_Tegra/kernel</div><div id="wwpID0E0TG0HA" class="Code">$ cp arch/arm/boot/dts/tegra210-jetson-cv-base-p2597-2180-a00.dtb &lt;L4T_path&gt;/Linux_for_Tegra/kernel/dtb</div><div id="wwpID0E0SG0HA" class="Number_Continue"><span class="Code_Char">flash.sh</span> automatically copies the Image file to the internal eMMC root filesystem.</div><div id="wwpID0E0RG0HA" class="Heading_3">Adding a new Kernel</div><div id="wwpID0E0QG0HA" class="Body_Text">After U-Boot has been flashed as the default boot loader, you can replace the kernel. The procedure you should follow depends on the kind of storage device from which your device boots.</div><div id="wwpID0E0PG0HA" class="Heading_5">To replace the kernel in systems that boot from internal eMMC</div><div id="wwpID0E0OG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Boot the Jetson TX1 system and log in.</div><div id="wwpID0E0NG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the new kernel files (using <span class="Code_Char">scp</span>) into the <span class="Code_Char">/boot</span> directory.</div><div id="wwpID0E0MG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Reboot the Jetson TX1 system.</div><div id="wwpID0E0LG0HA" class="Heading_5">To replace the kernel in systems that boot from an SD Card or USB Pen Drive</div><div id="wwpID0E0KG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Connect the SD Card or USB Pen Drive to your host system.</div><div id="wwpID0E0JG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the new kernel files to the <span class="Code_Char">/boot</span> directory on the SD Card or USB Pen Drive.</div><div id="wwpID0E0IG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Disconnect the SD Card or USB Pen Drive from the host system.</div><div id="wwpID0E0HG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Connect the SD Card or USB Pen Drive to the Jetson TX1 system.</div><div id="wwpID0E0GG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Reboot the Jetson TX1 system.</div><div id="wwpID0E0FG0HA" class="Heading_5">To replace the kernel in systems that boot from a TFTP/NFS server</div><div id="wwpID0E0EG0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Boot the Jetson TX1 system and log in.</div><div id="wwpID0E0DG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>On the target system enter the following command:</div><div id="wwpID0E0CG0HA" class="Code">$ sudo mount /dev/mmcblk0p1 /mnt</div><div id="wwpID0E0BG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Copy the new kernel files (using <span class="Code_Char">scp</span>) to the <span class="Code_Char">mnt/boot</span> directory.</div><div id="wwpID0E0AG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Reboot the Jetson TX1 system.</div><div id="wwpID0E06F0HA" class="Heading_2">Example Sysboot Configuration Files</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0HF0HA">eMMC Sysboot extlinux.conf File</a></div></dd></dl></div><div id="wwpID0E05F0HA" class="Body_Text">For external media, you must copy the root filesystem to the device <span class="Strong">after</span> running the <span class="Code_Char">flash.sh</span> command. Then you attach the device.</div><div id="wwpID0E04F0HA" class="Body_Text">The U-Boot functionality includes a default booting scan sequence. It scans bootable devices in the following order:</div><div id="wwpID0E03F0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>External SD Card</div><div id="wwpID0E02F0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Internal eMMC</div><div id="wwpID0E01F0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>USB Device</div><div id="wwpID0E0ZF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>NFS Device</div><div id="wwpID0E0YF0HA" class="Body_Text">It looks for an <span class="Code_Char">extlinux.conf</span> configuration file in the following directory of the bootable device:</div><div id="wwpID0E0XF0HA" class="Code">&lt;rootfs&gt;/boot/extlinux</div><div id="wwpID0E0WF0HA" class="Body_Text">Upon finding the <span class="Code_Char">extlinux.conf</span> file, U-Boot does the following.</div><div id="wwpID0E0VF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Uses the <span class="Code_Char">sysboot</span> command to read out boot configuration from <span class="Code_Char">extlinux.conf,</span></div><div id="wwpID0E0UF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Loads kernel Image file and device tree file, and then</div><div id="wwpID0E0TF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Boots the kernel.</div><div id="wwpID0E0SF0HA" class="Body_Text">The Image and device tree files are all user-accessible in the <span class="Code_Char">&lt;rootfs&gt;/boot</span> location after booting. The <span class="Code_Char">extlinux.conf</span> file is user accessible in the <span class="Code_Char">&lt;rootfs&gt;/boot/extlinux</span> location. Users can easily change these files to test their own kernel without flashing.</div><div id="wwpID0E0RF0HA" class="Body_Text">The file <span class="Code_Char">extlinux.conf</span> is a standard text-format sysboot configuration file that contains all boot information. It indicates the kernel image filename, the device tree blob filename, and the kernel boot command line. There are four example <span class="Code_Char">extlinux.conf</span> files provided in the L4T release for each supported board:</div><div id="wwpID0E0QF0HA" class="Code">extlinux.conf.emmc</div><div id="wwpID0E0PF0HA" class="Code">extlinux.conf.sdcard</div><div id="wwpID0E0OF0HA" class="Code">extlinux.conf.usb</div><div id="wwpID0E0NF0HA" class="Code">extlinux.conf.nfs</div><div id="wwpID0E0MF0HA" class="Body_Text">During flashing, <span class="Code_Char">flash.sh</span> copies the appropriate variant to the following location:</div><div id="wwpID0E0LF0HA" class="Code">&lt;rootfs&gt;/boot/extlinux/extlinux.conf</div><div id="wwpID0E0KF0HA" class="Body_Text">The <span class="Code_Char">extlinux.conf</span> files are very similar except for different kernel boot command lines. You can find the <span class="Code_Char">extlinux.conf</span> files in the following location:</div><div id="wwpID0E0JF0HA" class="Code">bootloader/&lt;platform&gt;/&lt;board&gt;</div><div id="wwpID0E0IF0HA" class="Body_Text">Where <span class="Code_Char">&lt;platform&gt;</span> is <span class="Code_Char">t210ref</span> and &lt;board&gt; is<span class="Code_Char"> p2371-2180-devkit</span> for Jetson TX1.</div><div id="wwpID0E0HF0HA" class="Heading_3">eMMC Sysboot extlinux.conf File</div><div id="wwpID0E0GF0HA" class="Body_Text">The <span class="Code_Char">extlinux.conf</span> file has the following contents.</div><div id="wwpID0E0FF0HA" class="Code">TIMEOUT 30</div><div id="wwpID0E0EF0HA" class="Code">DEFAULT primary</div><div id="wwpID0E0DF0HA" class="Code">&nbsp;</div><div id="wwpID0E0CF0HA" class="Code">MENU TITLE p2371-2180 eMMC boot options</div><div id="wwpID0E0BF0HA" class="Code">&nbsp;</div><div id="wwpID0E0AF0HA" class="Code">LABEL primary</div><div id="wwpID0E06E0HA" class="Code">      MENU LABEL primary kernel</div><div id="wwpID0E05E0HA" class="Code">      LINUX /boot/Image</div><div id="wwpID0E04E0HA" class="Code">      FDT /boot/tegra210-jetson-cv-base-p2597-2180-a00.dtb</div><div id="wwpID0E03E0HA" class="Code">      APPEND fbcon=map:1 console=tty0 console=ttyS0,115200n8 androidboot.modem=none androidboot.serialno=P2180A00P00940c003fd androidboot.security=non-secure tegraid=21.1.2.0.0 ddr_die=2048M@2048M ddr_die=2048M@4096M section=256M memtype=0 vpr_resize usb_port_owner_info=0 lane_owner_info=0 emc_max_dvfs=0 touch_id=0@63 video=tegrafb no_console_suspend=1 debug_uartport=lsport,0 earlyprintk=uart8250-32bit,0x70006000 maxcpus=4 usbcore.old_scheme_first=1 core_edp_mv=1125 core_edp_ma=4000 gpt android.kerneltype=normal androidboot.touch_vendor_id=0 androidboot.touch_panel_id=63 androidboot.touch_feature=0 androidboot.bootreason=pmc:software_reset,pmic:0x0 root=/dev/mmcblk0p1 rw rootwait</div><div id="wwpID0E02E0HA" class="Body_Text">Different boot methods have different APPEND strings in the <span class="Code_Char">extlinux.conf</span> file. Check each file for details.</div><div id="wwpID0E01E0HA" class="Body_Text"><span style="font-weight: bold">Note:</span> NFS booting also uses eMMC as boot device. <span class="Code_Char">&lt;rootfs&gt;/boot</span> is flashed into to eMMC but kernel mounts NFS device a root filesystem. </div><div id="wwpID0E0ZE0HA" class="Heading_2">Optimizing U-Boot Boot Time</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0WE0HA">Compile-Time Configuration</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0OE0HA">Disabling PCIe</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0EE0HA">Disabling USB Support</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0XD0HA">Environment Configuration</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0SD0HA">Setting Environment Variables</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0ND0HA">Compile-Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0JD0HA">Manufacturing and Flashing Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E02C0HA">extlinux.conf Modifications</a></div></dd></dl></dl></div><div id="wwpID0E0YE0HA" class="Body_Text">By default, U-Boot includes a default configuration that enables all supported hardware features. It searches the available devices for boot scripts. This enables out-of-the-box support for the widest possible variety of storage devices and boot configurations.</div><div id="wwpID0E0XE0HA" class="Body_Text">This flexibility delays execution of the final operating system because hardware support takes time to initialize and scanning all attached storage and network devices takes time. In constrained or pre-configured systems, this flexibility may not be necessary. You may know, ahead of time, which storage device contains the required files, or that certain devices don’t need to be initialized by the boot-loader. To optimize boot time, you can configure U-Boot to allow for these constraints and thereby reduce system boot time.</div><div id="wwpID0E0WE0HA" class="Heading_3">Compile-Time Configuration</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0OE0HA">Disabling PCIe</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0EE0HA">Disabling USB Support</a></div></dd></dl></div><div id="wwpID0E0VE0HA" class="Body_Text">U-Boot pro-actively initializes certain types of devices when it starts. However, disabling features at compile time may be useful to reduce system boot time. For example, if PCIe and network support are enabled, the PCIe bus is enumerated at startup which can be a time-consuming process.</div><div id="wwpID0E0UE0HA" class="Body_Text">The U-Boot compile-time configuration is stored in the following files:</div><div id="wwpID0E0TE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>include/configs/&lt;board&gt;.h </div><div id="wwpID0E0SE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>configs/&lt;board&gt;_defconfig</div><div id="wwpID0E0RE0HA" class="Body_Text">Where:</div><div id="wwpID0E0QE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>&lt;board&gt; is jetson-tk1 or p2371-2180.</div><div id="wwpID0E0PE0HA" class="Body_Text">Disabling features reduces the size of the U-Boot binary and thereby reduces the time it takes to load and initialize U-Boot itself.</div><div id="wwpID0E0OE0HA" class="Heading_4">Disabling PCIe</div><div id="wwpID0E0NE0HA" class="Body_Text">Since the PCIe bus is enumerated at startup, disabling it reduces overall system boot time.</div><div id="wwpID0E0ME0HA" class="Heading_5">To disable PCIe</div><div id="wwpID0E0LE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Remove the definition of the following values from <span class="Code_Char">include/configs/&lt;board&gt;.h</span>:</div><div id="wwpID0E0KE0HA" class="Code">CONFIG_PCI</div><div id="wwpID0E0JE0HA" class="Code">CONFIG_PCI_TEGRA</div><div id="wwpID0E0IE0HA" class="Code">CONFIG_PCI_PNP</div><div id="wwpID0E0HE0HA" class="Code">CONFIG_CMD_PCI</div><div id="wwpID0E0GE0HA" class="Code">CONFIG_CMD_PCI_ENUM</div><div id="wwpID0E0FE0HA" class="Code">CONFIG_RTL8169 <span class="Body_Text_Char" style="font-size: 11pt">(This is a PCIe device and thereby relies on PCIe support)</span></div><div id="wwpID0E0EE0HA" class="Heading_4">Disabling USB Support</div><div id="wwpID0E0DE0HA" class="Body_Text">U-Boot delays enumerating and initializing USB devices until the user, or a boot script, explicitly attempts to access a USB device. Consequently, disabling USB support does not reduce boot time.</div><div id="wwpID0E0CE0HA" class="Heading_5">To disable USB support</div><div id="wwpID0E0BE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Remove the following values from <span class="Code_Char">include/configs/&lt;board&gt;.h</span>:</div><div id="wwpID0E0AE0HA" class="Code">CONFIG_USB_EHCI</div><div id="wwpID0E06D0HA" class="Code">CONFIG_USB_EHCI_TEGRA</div><div id="wwpID0E05D0HA" class="Code">CONFIG_USB_MAX_CONTROLLER_COUNT</div><div id="wwpID0E04D0HA" class="Code">CONFIG_USB_STORAGE</div><div id="wwpID0E03D0HA" class="Code">CONFIG_CMD_USB</div><div id="wwpID0E02D0HA" class="Code">CONFIG_USB_HOST_ETHER</div><div id="wwpID0E01D0HA" class="Code">CONFIG_USB_ETHER_ASIX</div><div id="wwpID0E0ZD0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Edit <span class="Code_Char">include/configs/&lt;board&gt;.h</span> to remove the <span class="Code_Char">#include</span> of <span class="Code_Char">tegra-common-usb-gadget.h</span>.</div><div id="wwpID0E0YD0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Edit <span class="Code_Char">include/configs/tegra-common-post.h</span> to remove the USB entry from <span class="Code_Char">BOOT_TARGET_DEVICES</span>.</div><div id="wwpID0E0XD0HA" class="Heading_3">Environment Configuration</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0SD0HA">Setting Environment Variables</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0ND0HA">Compile-Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0JD0HA">Manufacturing and Flashing Time</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E02C0HA">extlinux.conf Modifications</a></div></dd></dl></div><div id="wwpID0E0WD0HA" class="Body_Text">U-Boot runtime behavior is controlled by scripts contained in the U-Boot environment. When U-Boot begins execution, it waits for <span class="Code_Char">&lt;bootdelay&gt;</span> seconds before executing the automatic boot sequence. During this time, the user may interrupt the boot process to access the U-Boot shell. If not interrupted, U-Boot executes <span class="Code_Char">&lt;bootcmd&gt;</span> as a shell command. <span class="Code_Char">&lt;bootcmd&gt;</span> contains a series of commands to search storage devices for boot scripts and execute them.</div><div id="wwpID0E0VD0HA" class="Body_Text">By modifying the values of these variables at compile or manufacturing time, U‑Boot can be directed to boot from a specific device in a specific manner, thereby reducing boot time.</div><div id="wwpID0E0UD0HA" class="Body_Text">The following table identifies the variables that can be modified.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt; width: 391.15pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 125.65pt"><div id="wwpID0EABI0TD0HA" class="Cell_Heading">Variable</div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 265.5pt"><div id="wwpID0EAAI0TD0HA" class="Cell_Heading">Description</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH0TD0HA" class="Cell_Text">bootdelay</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAH0TD0HA" class="Cell_Text">Contains the number of seconds that U-Boot pauses to determine whether the user wishes to interrupt the boot sequence.</div><div id="wwpID0ECAH0TD0HA" class="Cell_Text">To avoid delay, set to 0.</div><div id="wwpID0EBAH0TD0HA" class="Cell_Text"><span class="Emphasis" style="font-style: normal; font-weight: bold">Note:</span> Although this value avoids delay, if the user has requested to interrupt the boot process before the U-Boot shell is reached, that request is honored.</div><div id="wwpID0EAAH0TD0HA" class="Cell_Text">To avoid a delay and user interruption of the boot process, set <span class="Code_Char">bootdelay</span> to a negative value.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG0TD0HA" class="Cell_Text">bootcmd</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAG0TD0HA" class="Cell_Text">Contains a sequence of U-Boot shell commands to be executed automatically at boot.</div><div id="wwpID0EAAG0TD0HA" class="Cell_Text">For systems with custom requirements, this value can be completely replaced. However, simple customizations, such as selecting a specific storage device for booting, does not require editing this value.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF0TD0HA" class="Cell_Text">boot_targets</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EHAF0TD0HA" class="Cell_Text">Contains a space-separated list of storage devices or network protocols that U-Boot scans to find boot scripts.</div><div id="wwpID0EGAF0TD0HA" class="Cell_Text">Valid values include:</div><div id="wwpID0EFAF0TD0HA" class="Cell_Text" style="margin-left: 7.95pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>mmc0 - the built-in eMMC.</div><div id="wwpID0EEAF0TD0HA" class="Cell_Text" style="margin-left: 7.95pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>mmc1 - the SD card slot.</div><div id="wwpID0EDAF0TD0HA" class="Cell_Text" style="margin-left: 7.95pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>usb0 - any attached USB Mass Storage device.</div><div id="wwpID0ECAF0TD0HA" class="Cell_Text" style="margin-left: 7.95pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>pxe - network, using DHCP to receive an IP address, then PXE to download a syslinux configuration file.</div><div id="wwpID0EBAF0TD0HA" class="Cell_Text" style="margin-left: 7.95pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>dhcp - network using DHCP to receive an IP address, then TFTP to download a U-Boot boot script.</div><div id="wwpID0EAAF0TD0HA" class="Cell_Text">This variable can be set to a single specific device, or a more restrictive list than the default.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBBE0TD0HA" class="Cell_Text"><span style="font-weight: bold">Applies to:</span> L4T R23 releases and later</div><div id="wwpID0EABE0TD0HA" class="Cell_Text">scan_dev_for_boot_part</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAE0TD0HA" class="Cell_Text">Contains a script to parse the device partition table and determines which partition U-Boot must scan for boot files.</div><div id="wwpID0ECAE0TD0HA" class="Cell_Text">If the partition number is known ahead of time, replace the script with a simpler script that hardcodes the value of &lt;devplist&gt; with a single partition number (represented in hexadecimal), and then runs either or both of the following variables:</div><div id="wwpID0EBAE0TD0HA" class="Cell_Text" style="margin-left: 8.1pt; text-indent: -8.1pt"><span class="WebWorks_Number" style="width: 8.1pt"><span>•	</span></span>scan_dev_for_extlinux or</div><div id="wwpID0EAAE0TD0HA" class="Cell_Text" style="margin-left: 8.1pt; text-indent: -8.1pt"><span class="WebWorks_Number" style="width: 8.1pt"><span>•	</span></span>scan_dev_for_boot_scripts</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0TD0HA" class="Cell_Text">boot_prefixes</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EFAD0TD0HA" class="Cell_Text">Contains a list of filesystem directories to scan for boot scripts or configuration files.</div><div id="wwpID0EEAD0TD0HA" class="Cell_Text">File system layouts vary between installations.</div><div id="wwpID0EDAD0TD0HA" class="Cell_Text">For example, /boot may be a separate partition containing boot scripts, or part of the root filesystem.</div><div id="wwpID0ECAD0TD0HA" class="Cell_Text">By default, U-Boot searches both locations for boot scripts.</div><div id="wwpID0EBAD0TD0HA" class="Cell_Text">In constrained cases, the user may set this variable to a single directory name so that U-Boot does not search unnecessary directories.</div><div id="wwpID0EAAD0TD0HA" class="Cell_Text"><span style="font-weight: bold">Note:</span> All entries in this variable must contain both a leading and a trailing /.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0TD0HA" class="Cell_Text">scan_dev_for_extlinux</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0ECAC0TD0HA" class="Cell_Text">Contains a script to search for extlinux configuration files. If found, boots the system based on their content.</div><div id="wwpID0EBAC0TD0HA" class="Cell_Text">If the system is known not to use extlinux configuration files, replace this script with commands that do nothing.</div><div id="wwpID0EAAC0TD0HA" class="Cell_Text">For best results, set this variable to an innocuous value, such as “true”, rather than leaving it empty, so that U-Boot does not complain about attempts to execute an empty variable as a script.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0TD0HA" class="Cell_Text">scan_dev_for_scripts</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EDAB0TD0HA" class="Cell_Text">Contains a script to search for U-Boot boot scripts. If found, loads and executes them.</div><div id="wwpID0ECAB0TD0HA" class="Cell_Text">If the system is known not to use U-Boot boot scripts, replace this script with commands that do nothing.</div><div id="wwpID0EBAB0TD0HA" class="Cell_Text"><span style="font-weight: bold">Note:</span> The default boot scripts execute &lt;scan_dev_for_extlinux&gt; prior to executing &lt;scan_dev_for_scripts&gt;. Therefore, modifying this variable does not affect systems that boot using extlinux configuration files because this script will never be executed.</div><div id="wwpID0EAAB0TD0HA" class="Cell_Text">For best results, set this variable to an innocuous value, such as “true”, rather than leaving it empty, so that U-Boot does not complain about attempts to execute an empty variable as a script.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0TD0HA" class="Cell_Text">boot_scripts</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EBAA0TD0HA" class="Cell_Text">Contains a space-separated list of U-Boot script names for &lt;scan_dev_for_scripts&gt; to search for. </div><div id="wwpID0EAAA0TD0HA" class="Cell_Text">If the script name is known ahead of time, set this variable to the desired value rather than the default list.</div></td></tr></table></div><div id="wwpID0E0SD0HA" class="Heading_4">Setting Environment Variables</div><div id="wwpID0E0RD0HA" class="Body_Text">You can set environment variable at:</div><div id="wwpID0E0QD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Compile-Time</div><div id="wwpID0E0PD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Manufacturing Time</div><div id="wwpID0E0OD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Flashing Time</div><div id="wwpID0E0ND0HA" class="Heading_4">Compile-Time</div><div id="wwpID0E0MD0HA" class="Body_Text">When U-Boot starts executing, it attempts to initialize the environment variables from data stored in flash memory. The location of the data is determined by the U-Boot configuration file on the board. If the data is missing or corrupted, U-Boot uses the default set of values that are built into the U-Boot binary.</div><div id="wwpID0E0LD0HA" class="Body_Text">The default L4T flashing process does not write this data into flash memory, so the built-in copy is always used initially. The built-in default environment values are set in the following places in the U-Boot source code:</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt; width: 391.15pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 161.65pt"><div id="wwpID0EABD0KD0HA" class="Cell_Heading">U-Boot Source Code</div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 229.5pt"><div id="wwpID0EAAD0KD0HA" class="Cell_Heading">Variable Value</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0KD0HA" class="Cell_Text">include/config_distro_bootcmd.h</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0KD0HA" class="Cell_Text">This file defines the variables and scripts related to the automatic boot process.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0KD0HA" class="Cell_Text">include/config_distro_defaults.h</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0KD0HA" class="Cell_Text">The value of CONFIG_BOOTDELAY determines the default value of &lt;bootdelay&gt;.</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0KD0HA" class="Cell_Text">include/configs/tegra-common-post.h</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EHAA0KD0HA" class="Cell_Text">The value of BOOT_TARGET_DEVICES determines:</div><div id="wwpID0EGAA0KD0HA" class="Cell_Text" style="margin-left: 8.1pt; text-indent: -8.1pt"><span class="WebWorks_Number" style="width: 8.1pt"><span>•	</span></span>The default value of &lt;boot_targets&gt;.</div><div id="wwpID0EFAA0KD0HA" class="Cell_Text" style="margin-left: 8.1pt; text-indent: -8.1pt"><span class="WebWorks_Number" style="width: 8.1pt"><span>•	</span></span>The set of legal values that can appear in &lt;boot_targets&gt;. </div><div id="wwpID0EEAA0KD0HA" class="Cell_Text" style="margin-left: 8.1pt">Removing entries from this variable prevents the use of those values in &lt;boot_targets&gt; at all.</div><div id="wwpID0EDAA0KD0HA" class="Cell_Text" style="margin-left: 8.1pt">To modify this value at compile-time:</div><div id="wwpID0ECAA0KD0HA" class="Cell_Text" style="margin-left: 26.1pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Modify include/config_distro_bootcmd.h to avoid setting &lt;boot_targets&gt; if the board-specific configuration file has already defined this value.</div><div id="wwpID0EBAA0KD0HA" class="Cell_Text" style="margin-left: 26.1pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Modify include/config/&lt;board&gt;.h to set &lt;boot_targets&gt;.</div><div id="wwpID0EAAA0KD0HA" class="Cell_Text" style="margin-left: 8.1pt">For example, see how CONFIG_BOOTCOMMAND is defined in L4T R23 and later.</div></td></tr></table></div><div id="wwpID0E0JD0HA" class="Heading_4">Manufacturing and Flashing Time</div><div id="wwpID0E0ID0HA" class="Body_Text">You can modify your manufacturing flow to add an extra step that writes a saved copy of the environment variables to flash. The following provides a set of alternatives to use for modifying your manufacturing flow:</div><div id="wwpID0E0HD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>After flashing the board, arrange for the board to execute U-Boot, and cause U-Boot to execute commands that modify and save the environment:</div><div id="wwpID0E0GD0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Reset the board so that U-Boot runs and sends commands to U-Boot using the serial console. You must write and execute some program on your host system to send the commands to U-Boot.</div><div id="wwpID0E0FD0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Place the board into USB recovery mode. Download U-Boot into RAM. Package the required commands along with the U-Boot binary. Execute the following from the directory where you extracted L4T on your host system:</div><div id="wwpID0E0ED0HA" class="Code_Indent">./bootloader/exec-uboot.sh &lt;board&gt; “&lt;uboot_script&gt;”</div><div id="wwpID0E0DD0HA" class="List_Continue_2">Where <span class="Code_Char">&lt;uboot_script&gt;</span> is a U-Boot script that sets the environment variables according to your needs.</div><div id="wwpID0E0CD0HA" class="List_Continue_2"><span style="font-weight: bold">Note: </span>L4T Release 21 does not contain an equivalent of <span class="Code_Char">exec-uboot.sh</span>. However, use <span class="Code_Char">tegra-uboot-flasher</span> instead. See <span class="Hyperlink"><a href="https://github.com/NVIDIA/tegra-uboot-flasher-scripts" target="external_window">https://github.com/NVIDIA/tegra-uboot-flasher-scripts</a></span> for details.</div><div id="wwpID0E0BD0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute a sequence of commands similar to the following:</div><div id="wwpID0E0AD0HA" class="Code_Indent">env default -f -a; setenv boot_targets mmc0; saveenv</div><div id="wwpID0E06C0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Manually edit the U-Boot environment interactively, save the result, and extract the appropriate flash memory region to a file on your host system. Then, modify the L4T partition layout XML file to that the data is written to flash during any subsequent flashing process.</div><div id="wwpID0E05C0HA" class="List_Continue">Alternatively, apply this technique if your manufacturing process programs flash chips directly, rather than using the L4T flashing tools on each board. You must merge the extracted saved environment data into your flash image file, rather than referencing it from the L4T partition layout XML file.</div><div id="wwpID0E04C0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Generate a set of saved environment data using the U-Boot <span class="Code_Char">fw_env</span> tool located in the tools/env directory in the U-Boot source code. Then, modify the L4T partition layout XML file so that data is written to flash during any subsequent flashing process.</div><div id="wwpID0E03C0HA" class="List_Continue">Alternatively, apply this technique if your manufacturing process programs flash chips directly, rather than using the L4T flashing tools on each board. You must merge the extracted saved environment data into your flash image file, rather than referencing it from the L4T partition layout XML file.</div><div id="wwpID0E02C0HA" class="Heading_4">extlinux.conf Modifications</div><div id="wwpID0E01C0HA" class="Body_Text">L4T includes an <span class="Code_Char">extlinux.conf</span> file that tells U-Boot which kernel and DT filenames to load. It also includes the commandline to pass to the kernel. The file is configured to display a boot menu to the user for 3 seconds before automatically booting. To reduce boot processing time, you can remove this timeout.</div><div id="wwpID0E0ZC0HA" class="Heading_5">To remove extlinux.conf timeout boot menu</div><div id="wwpID0E0YC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Edit <span class="Code_Char">extlinux.conf</span> file to remove the lines containing the following keywords:</div><div id="wwpID0E0XC0HA" class="Code">TIMEOUT</div><div id="wwpID0E0WC0HA" class="Code">MENU</div><div id="wwpID0E0VC0HA" class="List_Continue">Prior to flashing, this file is located in the L4T flashing directory as:</div><div id="wwpID0E0UC0HA" class="Code">bootloader/&lt;board_dir&gt;/extlinux.conf.emmc</div><div id="wwpID0E0TC0HA" class="List_Continue">Where &lt;board_dir&gt; is:</div><div id="wwpID0E0SC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>“ardbeg” for L4T Release 21 (Jetson TK1).</div><div id="wwpID0E0RC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>“t210ref/p2371-2180” or “t210ref/p2371-2180-refkit” for L4T Release 23 (p2371-2180 / Jetson TX1).</div><div id="wwpID0E0QC0HA" class="Heading_2">Debugging U-Boot Environment</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0OC0HA">Interrupting U-Boot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0HC0HA">Getting Help</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0CC0HA">Listing a Directory Structure</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0GB0HA">Listing the Contents of a Directory</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0EZHA">Printing the U-Boot Environment</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0EUHA">Printing/Setting Environment Variables</a></div></dd></dl></div><div id="wwpID0E0PC0HA" class="Body_Text">Use these debugging tips to help you debug your U-Boot environment. These examples do not represent a comprehensive listing of U-Boot functionality. For a full list of supported commands and their usage by U-Boot, consult U-Boot documentation and source.</div><div id="wwpID0E0OC0HA" class="Heading_3">Interrupting U-Boot</div><div id="wwpID0E0NC0HA" class="Body_Text">You can interrupt U-Boot during boot.</div><div id="wwpID0E0MC0HA" class="Heading_5">To interrupt U-Boot</div><div id="wwpID0E0LC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Connect a terminal application to the serial port of the board.</div><div id="wwpID0E0KC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Power on or reset the board.</div><div id="wwpID0E0JC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Wait for the U-Boot sign on message to appear. Key presses before this point in time may be ignored.</div><div id="wwpID0E0IC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Press any key to interrupt the automatic boot process.</div><div id="wwpID0E0HC0HA" class="Heading_3">Getting Help</div><div id="wwpID0E0GC0HA" class="Body_Text">On the U‑Boot terminal screen, type <span class="Code_Char">help</span> at any time for the list of supported commands from the U‑Boot terminal.</div><div id="wwpID0E0FC0HA" class="Heading_5">To see the U-Boot Help text</div><div id="wwpID0E0EC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>To see the U-Boot help text enter the following command:</div><div id="wwpID0E0DC0HA" class="Code_Indent"># help</div><div id="wwpID0E0CC0HA" class="Heading_3">Listing a Directory Structure</div><div id="wwpID0E0BC0HA" class="Body_Text">You can list the directory structure of a particular device.</div><div id="wwpID0E0AC0HA" class="Heading_5">To list the directory structure</div><div id="wwpID0E06B0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>To list the directory structure of eMMC device 0 partition 1, enter the following command:</div><div id="wwpID0E05B0HA" class="Code"># ls mmc 0:1</div><div id="wwpID0E04B0HA" class="List_Continue">This command functions correctly on EXT2/3/4 and FAT file systems.</div><div id="wwpID0E03B0HA" class="List_Continue">Example output follows:</div><div id="wwpID0E02B0HA" class="Code"> &lt;DIR&gt;       4096 .</div><div id="wwpID0E01B0HA" class="Code"> &lt;DIR&gt;       4096 ..</div><div id="wwpID0E0ZB0HA" class="Code"> &lt;DIR&gt;       4096 bin</div><div id="wwpID0E0YB0HA" class="Code"> &lt;DIR&gt;       4096 boot</div><div id="wwpID0E0XB0HA" class="Code"> &lt;DIR&gt;       4096 dev</div><div id="wwpID0E0WB0HA" class="Code"> &lt;DIR&gt;       4096 etc</div><div id="wwpID0E0VB0HA" class="Code"> &lt;DIR&gt;       4096 home</div><div id="wwpID0E0UB0HA" class="Code"> &lt;DIR&gt;       4096 lib</div><div id="wwpID0E0TB0HA" class="Code"> &lt;DIR&gt;       4096 lost+found</div><div id="wwpID0E0SB0HA" class="Code"> &lt;DIR&gt;       4096 media</div><div id="wwpID0E0RB0HA" class="Code"> &lt;DIR&gt;       4096 mnt</div><div id="wwpID0E0QB0HA" class="Code"> &lt;DIR&gt;       4096 opt</div><div id="wwpID0E0PB0HA" class="Code"> &lt;DIR&gt;       4096 proc</div><div id="wwpID0E0OB0HA" class="Code"> &lt;DIR&gt;       4096 root</div><div id="wwpID0E0NB0HA" class="Code"> &lt;DIR&gt;       4096 sbin</div><div id="wwpID0E0MB0HA" class="Code"> &lt;DIR&gt;       4096 selinux</div><div id="wwpID0E0LB0HA" class="Code"> &lt;DIR&gt;       4096 srv</div><div id="wwpID0E0KB0HA" class="Code"> &lt;DIR&gt;       4096 sys</div><div id="wwpID0E0JB0HA" class="Code"> &lt;DIR&gt;       4096 tmp</div><div id="wwpID0E0IB0HA" class="Code"> &lt;DIR&gt;       4096 usr</div><div id="wwpID0E0HB0HA" class="Code"> &lt;DIR&gt;       4096 var</div><div id="wwpID0E0GB0HA" class="Heading_3">Listing the Contents of a Directory</div><div id="wwpID0E0FB0HA" class="Body_Text">You can list the contents of any directory.</div><div id="wwpID0E0EB0HA" class="Heading_5">To list the contents of a directory</div><div id="wwpID0E0DB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>List directory contents with the following command:</div><div id="wwpID0E0CB0HA" class="Code"># ls mmc 0:1 &lt;directory&gt;</div><div id="wwpID0E0BB0HA" class="List_Continue">Where <span class="Code_Char">&lt;directory&gt;</span> is a pathname in the filesystem.</div><div id="wwpID0E0AB0HA" class="List_Continue">For example, to list contents of the <span class="Code_Char">/boot</span> directory where the <span class="Code_Char">zImage</span> file should be, (as shown in the example output below), use the following command:</div><div id="wwpID0E6HA" class="Code"># ext2ls mmc 0:1 /boot</div><div id="wwpID0E5HA" class="Code">&lt;DIR&gt; &nbsp; &nbsp; &nbsp; 1024 .</div><div id="wwpID0E4HA" class="Code">&lt;DIR&gt; &nbsp; &nbsp; &nbsp; 1024 ..</div><div id="wwpID0E3HA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;34642 tegra124-pm375.dtb</div><div id="wwpID0E2HA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;908 extlinux.conf</div><div id="wwpID0E1HA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5910248 zImage</div><div id="wwpID0EZHA" class="Heading_3">Printing the U-Boot Environment</div><div id="wwpID0EYHA" class="Body_Text">You can print the entire U‑Boot environment.</div><div id="wwpID0EXHA" class="Heading_5">To print the U-Boot environment</div><div id="wwpID0EWHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0EVHA" class="Code"># printenv</div><div id="wwpID0EUHA" class="Heading_3">Printing/Setting Environment Variables</div><div id="wwpID0ETHA" class="Body_Text">You can print and set environment variables.</div><div id="wwpID0ESHA" class="Heading_5">To print an environment variable</div><div id="wwpID0ERHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0EQHA" class="Code"># printenv &lt;environment_variable&gt;</div><div id="wwpID0EPHA" class="List_Continue">Where <span class="Code_Char">&lt;environment_variable&gt;</span> refers to an environment variable in U‑Boot.</div><div id="wwpID0EOHA" class="List_Continue">For example, to print the list of devices U-Boot sends console output to, execute:</div><div id="wwpID0ENHA" class="Code"># printenv stdout</div><div id="wwpID0EMHA" class="List_Continue">Output can be as follows:</div><div id="wwpID0ELHA" class="Code">stdout=serial</div><div id="wwpID0EKHA" class="Heading_5">To set an environment variable</div><div id="wwpID0EJHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0EIHA" class="Code"># setenv &lt;environment_variable&gt; &lt;new_value&gt;</div><div id="wwpID0EHHA" class="List_Continue">Where <span class="Code_Char">&lt;environment_variable&gt;</span> refers to an environment variable in U‑Boot and &lt;new_value&gt; is the new value for that variable. </div><div id="wwpID0EGHA" class="List_Continue">For example, to modify the set of devices that U-Boot sends console output to, execute:</div><div id="wwpID0EFHA" class="Code"># setenv stdout serial</div><div id="wwpID0EEHA" class="Heading_5">To save the modified environment</div><div id="wwpID0EDHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0ECHA" class="Code"># saveenv</div><div id="wwpID0EBHA" class="List_Continue">The saved modified environment is preserved in case of resets and reboots.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br><hr color="#DEE4F0"><table width="90%" align="center" summary=""><tr><td class="Footer_Left"><font color="gray"><b><br>
        Copyright © 2011-2016 by NVIDIA Corporation.
          All rights reserved.
        </font></td><td class="Footer_Right"><font color="gray">
           PG_06076-R24<br>
        Revised: 11 May 2016
        </font></td></tr></table></footer></body></html>